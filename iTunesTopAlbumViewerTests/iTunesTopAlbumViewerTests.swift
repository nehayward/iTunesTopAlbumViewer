//
//  iTunesTopAlbumViewerTests.swift
//  iTunesTopAlbumViewerTests
//
//  Created by Nick Hayward on 3/24/20.
//  Copyright © 2020 Nick Hayward. All rights reserved.
//

import XCTest
@testable import iTunesTopAlbumViewer

class iTunesTopAlbumViewerTests: XCTestCase {
    
    override func setUp() {

    }
    
    override func tearDown() {
        
    }
    
    func testDecodeFeed() {
        let feedJSON_2020_03_24 = """
{\"feed\":{\"title\":\"Top Albums\",\"id\":\"https://rss.itunes.apple.com/api/v1/us/apple-music/top-albums/all/10/explicit.json\",\"author\":{\"name\":\"iTunes Store\",\"uri\":\"http://wwww.apple.com/us/itunes/\"},\"links\":[{\"self\":\"https://rss.itunes.apple.com/api/v1/us/apple-music/top-albums/all/10/explicit.json\"},{\"alternate\":\"https://itunes.apple.com/WebObjects/MZStore.woa/wa/viewTop?genreId=34\\u0026popId=82\\u0026app=music\"}],\"copyright\":\"Copyright © 2018 Apple Inc. Todos los derechos reservados.\",\"country\":\"us\",\"icon\":\"http://itunes.apple.com/favicon.ico\",\"updated\":\"2020-03-24T01:54:39.000-07:00\",\"results\":[{\"artistName\":\"The Weeknd\",\"id\":\"1499378108\",\"releaseDate\":\"2020-03-20\",\"name\":\"After Hours\",\"kind\":\"album\",\"copyright\":\"℗ 2020 The Weeknd XO, Inc., manufactured and marketed by Republic Records, a division of UMG Recordings, Inc.\",\"artistId\":\"479756766\",\"contentAdvisoryRating\":\"Explicit\",\"artistUrl\":\"https://music.apple.com/us/artist/the-weeknd/479756766?app=music\",\"artworkUrl100\":\"https://is2-ssl.mzstatic.com/image/thumb/Music124/v4/06/e5/8c/06e58ce4-a813-8d5b-ef64-03a69064773c/20UMGIM12176.rgb.jpg/200x200bb.png\",\"genres\":[{\"genreId\":\"15\",\"name\":\"R\\u0026B/Soul\",\"url\":\"https://itunes.apple.com/us/genre/id15\"},{\"genreId\":\"34\",\"name\":\"Music\",\"url\":\"https://itunes.apple.com/us/genre/id34\"}],\"url\":\"https://music.apple.com/us/album/after-hours/1499378108?app=music\"},{\"artistName\":\"Lil Uzi Vert\",\"id\":\"1502707380\",\"releaseDate\":\"2020-03-13\",\"name\":\"Eternal Atake (Deluxe) - LUV vs. The World 2\",\"kind\":\"album\",\"copyright\":\"℗ 2020 Atlantic Recording Corporation\",\"artistId\":\"940710524\",\"contentAdvisoryRating\":\"Explicit\",\"artistUrl\":\"https://music.apple.com/us/artist/lil-uzi-vert/940710524?app=music\",\"artworkUrl100\":\"https://is4-ssl.mzstatic.com/image/thumb/Music123/v4/78/7a/e3/787ae30d-0b60-e5b8-87fe-9d43bc157c47/075679820310.jpg/200x200bb.png\",\"genres\":[{\"genreId\":\"18\",\"name\":\"Hip-Hop/Rap\",\"url\":\"https://itunes.apple.com/us/genre/id18\"},{\"genreId\":\"34\",\"name\":\"Music\",\"url\":\"https://itunes.apple.com/us/genre/id34\"}],\"url\":\"https://music.apple.com/us/album/eternal-atake-deluxe-luv-vs-the-world-2/1502707380?app=music\"},{\"artistName\":\"Lil Baby\",\"id\":\"1498988850\",\"releaseDate\":\"2020-02-28\",\"name\":\"My Turn\",\"kind\":\"album\",\"copyright\":\"Quality Control Music/Motown Records; ℗ 2020 Quality Control Music, LLC, under exclusive license to UMG Recordings, Inc.\",\"artistId\":\"1276656483\",\"contentAdvisoryRating\":\"Explicit\",\"artistUrl\":\"https://music.apple.com/us/artist/lil-baby/1276656483?app=music\",\"artworkUrl100\":\"https://is2-ssl.mzstatic.com/image/thumb/Music124/v4/dd/25/8c/dd258c8a-f804-785f-1268-ad3cac0db873/20UMGIM04591.rgb.jpg/200x200bb.png\",\"genres\":[{\"genreId\":\"18\",\"name\":\"Hip-Hop/Rap\",\"url\":\"https://itunes.apple.com/us/genre/id18\"},{\"genreId\":\"34\",\"name\":\"Music\",\"url\":\"https://itunes.apple.com/us/genre/id34\"}],\"url\":\"https://music.apple.com/us/album/my-turn/1498988850?app=music\"},{\"artistName\":\"Childish Gambino\",\"id\":\"1503868246\",\"releaseDate\":\"2020-03-22\",\"name\":\"3.15.20\",\"kind\":\"album\",\"copyright\":\"℗ 2020 mcDJ Recording, under license to RCA Records, a division of Sony Music Entertainment\",\"artistId\":\"466842536\",\"contentAdvisoryRating\":\"Explicit\",\"artistUrl\":\"https://music.apple.com/us/artist/childish-gambino/466842536?app=music\",\"artworkUrl100\":\"https://is3-ssl.mzstatic.com/image/thumb/Music123/v4/c4/a2/69/c4a26947-9bc4-7310-a7cf-50c20d3caa1b/886448371472.jpg/200x200bb.png\",\"genres\":[{\"genreId\":\"14\",\"name\":\"Pop\",\"url\":\"https://itunes.apple.com/us/genre/id14\"},{\"genreId\":\"34\",\"name\":\"Music\",\"url\":\"https://itunes.apple.com/us/genre/id34\"}],\"url\":\"https://music.apple.com/us/album/3-15-20/1503868246?app=music\"},{\"artistName\":\"Jhené Aiko\",\"id\":\"1500821043\",\"releaseDate\":\"2020-03-06\",\"name\":\"Chilombo\",\"kind\":\"album\",\"copyright\":\"℗ 2020 Def Jam Recordings, a division of UMG Recordings, Inc.\",\"artistId\":\"198431322\",\"contentAdvisoryRating\":\"Explicit\",\"artistUrl\":\"https://music.apple.com/us/artist/jhen%C3%A9-aiko/198431322?app=music\",\"artworkUrl100\":\"https://is4-ssl.mzstatic.com/image/thumb/Music114/v4/a3/95/9d/a3959d3e-cca0-a300-ba5e-637ca57bab84/20UMGIM09141.rgb.jpg/200x200bb.png\",\"genres\":[{\"genreId\":\"15\",\"name\":\"R\\u0026B/Soul\",\"url\":\"https://itunes.apple.com/us/genre/id15\"},{\"genreId\":\"34\",\"name\":\"Music\",\"url\":\"https://itunes.apple.com/us/genre/id34\"}],\"url\":\"https://music.apple.com/us/album/chilombo/1500821043?app=music\"},{\"artistName\":\"Bad Bunny\",\"id\":\"1500776322\",\"releaseDate\":\"2020-02-29\",\"name\":\"YHLQMDLG\",\"kind\":\"album\",\"copyright\":\"℗ 2020 Rimas Entertainment LLC\",\"artistId\":\"1126808565\",\"contentAdvisoryRating\":\"Explicit\",\"artistUrl\":\"https://music.apple.com/us/artist/bad-bunny/1126808565?app=music\",\"artworkUrl100\":\"https://is1-ssl.mzstatic.com/image/thumb/Music124/v4/ca/0e/31/ca0e3104-fe92-1985-65ba-3474808f0948/195081078724.jpg/200x200bb.png\",\"genres\":[{\"genreId\":\"1119\",\"name\":\"Urbano latino\",\"url\":\"https://itunes.apple.com/us/genre/id1119\"},{\"genreId\":\"34\",\"name\":\"Music\",\"url\":\"https://itunes.apple.com/us/genre/id34\"},{\"genreId\":\"12\",\"name\":\"Latino\",\"url\":\"https://itunes.apple.com/us/genre/id12\"}],\"url\":\"https://music.apple.com/us/album/yhlqmdlg/1500776322?app=music\"},{\"artistName\":\"The Weeknd\",\"id\":\"1499385848\",\"releaseDate\":\"2020-03-20\",\"name\":\"After Hours\",\"kind\":\"album\",\"copyright\":\"℗ 2020 The Weeknd XO, Inc., manufactured and marketed by Republic Records, a division of UMG Recordings, Inc.\",\"artistId\":\"479756766\",\"artistUrl\":\"https://music.apple.com/us/artist/the-weeknd/479756766?app=music\",\"artworkUrl100\":\"https://is5-ssl.mzstatic.com/image/thumb/Music114/v4/48/8e/f8/488ef857-e038-ddda-91dc-ade280127889/20UMGIM11048.rgb.jpg/200x200bb.png\",\"genres\":[{\"genreId\":\"15\",\"name\":\"R\\u0026B/Soul\",\"url\":\"https://itunes.apple.com/us/genre/id15\"},{\"genreId\":\"34\",\"name\":\"Music\",\"url\":\"https://itunes.apple.com/us/genre/id34\"}],\"url\":\"https://music.apple.com/us/album/after-hours/1499385848?app=music\"},{\"artistName\":\"YoungBoy Never Broke Again\",\"id\":\"1498288784\",\"releaseDate\":\"2020-02-21\",\"name\":\"Still Flexin, Still Steppin\",\"kind\":\"album\",\"copyright\":\"℗ 2020 Never Broke Again, LLC\",\"artistId\":\"1168822104\",\"contentAdvisoryRating\":\"Explicit\",\"artistUrl\":\"https://music.apple.com/us/artist/youngboy-never-broke-again/1168822104?app=music\",\"artworkUrl100\":\"https://is4-ssl.mzstatic.com/image/thumb/Music124/v4/29/b7/5e/29b75e4e-3354-0cc3-684d-f6f1e65a39ea/075679824066.jpg/200x200bb.png\",\"genres\":[{\"genreId\":\"18\",\"name\":\"Hip-Hop/Rap\",\"url\":\"https://itunes.apple.com/us/genre/id18\"},{\"genreId\":\"34\",\"name\":\"Music\",\"url\":\"https://itunes.apple.com/us/genre/id34\"}],\"url\":\"https://music.apple.com/us/album/still-flexin-still-steppin/1498288784?app=music\"},{\"artistName\":\"The Weeknd\",\"id\":\"1503727916\",\"releaseDate\":\"2020-03-23\",\"name\":\"After Hours (Deluxe)\",\"kind\":\"album\",\"copyright\":\"℗ 2020 The Weeknd XO, Inc., marketed by Republic Records, a division of UMG Recordings, Inc.\",\"artistId\":\"479756766\",\"contentAdvisoryRating\":\"Explicit\",\"artistUrl\":\"https://music.apple.com/us/artist/the-weeknd/479756766?app=music\",\"artworkUrl100\":\"https://is2-ssl.mzstatic.com/image/thumb/Music123/v4/9f/0c/11/9f0c11b3-f05f-3031-d29f-8df93645e1a1/20UMGIM21166.rgb.jpg/200x200bb.png\",\"genres\":[{\"genreId\":\"15\",\"name\":\"R\\u0026B/Soul\",\"url\":\"https://itunes.apple.com/us/genre/id15\"},{\"genreId\":\"34\",\"name\":\"Music\",\"url\":\"https://itunes.apple.com/us/genre/id34\"}],\"url\":\"https://music.apple.com/us/album/after-hours-deluxe/1503727916?app=music\"},{\"artistName\":\"Don Toliver\",\"id\":\"1502318851\",\"releaseDate\":\"2020-03-13\",\"name\":\"Heaven Or Hell\",\"kind\":\"album\",\"copyright\":\"℗ 2020 Cactus Jack / Atlantic\",\"artistId\":\"1237012992\",\"contentAdvisoryRating\":\"Explicit\",\"artistUrl\":\"https://music.apple.com/us/artist/don-toliver/1237012992?app=music\",\"artworkUrl100\":\"https://is4-ssl.mzstatic.com/image/thumb/Music123/v4/1b/bb/11/1bbb1185-90dd-a940-d80c-668b369a6a3d/075679823908.jpg/200x200bb.png\",\"genres\":[{\"genreId\":\"18\",\"name\":\"Hip-Hop/Rap\",\"url\":\"https://itunes.apple.com/us/genre/id18\"},{\"genreId\":\"34\",\"name\":\"Music\",\"url\":\"https://itunes.apple.com/us/genre/id34\"}],\"url\":\"https://music.apple.com/us/album/heaven-or-hell/1502318851?app=music\"}]}}
"""
        let data = feedJSON_2020_03_24.data(using: .utf8)
        XCTAssertNotNil(data, "Failed converting JSON string to data")
        XCTAssertNoThrow(try JSONDecoder().decode(Feed.self, from: data!), "Failed to decode Feed")
        XCTAssertEqual(try JSONDecoder().decode(Feed.self, from: data!).results.count, 10)
    }
}
